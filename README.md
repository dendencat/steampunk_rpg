# ギア・クロニクル ～錆びついた空の歌～ (Gear Chronicle: Song of the Rusted Sky)

## 概要 (Overview)
本作は、SFC後期の緻密なドット絵表現と、少年漫画的な王道ストーリーを目指した「16bitスタイル・スチームパンクRPG」のプロトタイプです。
「錆」「蒸気」「油」の質感にこだわり、アナログな機械仕掛けの世界観を表現しています。

## ストーリー (Story)
厚いスモッグに覆われた機械都市「ギアガルド」。
ジャンク屋の少年**アルト**は、ある日、記憶を失った少女**ミナ**と出会う。
彼女の持つ「時を操る力」と、アルトの「発明」の才能。
二人は、空を閉ざす雲を払い、伝説の「青い空」を見るために冒険へと旅立つ。

## 主な機能 (Key Features)

### 1. バトルシステム (Battle System)
*   **ターン制コマンドバトル**: 素早さ順に行動するクラシックなスタイル。
*   **物理演算ダメージ**: 攻撃力、防御力に加え、「レンチ補正」「アーマーブレイク」などの要素を計算。
*   **ボスAI**: HP減少による形態変化（人間→機械融合）や、特殊攻撃の実装。

### 2. 発明システム (Invention System)
*   **クラフティング**: 廃材（ジャンク）を組み合わせてアイテムやガジェットを作成。
*   **成功率判定**: アルトの「器用さ」と素材の「レアリティ」に基づき、成功・大成功・失敗を判定。

### 3. 世界観・データ (World Data)
*   **マップ**: 下層スラム街、大陸横断列車「アイアン・サーペント」、廃棄プラント「ロッテン・コア」、空中要塞「バベル・ギア」。
*   **イベント**: 状態遷移（フラグ管理）によるストーリー進行。

## ディレクトリ構成 (Directory Structure)
```
src/
├── data/           # ゲームデータ (JSON)
│   ├── maps/       # マップ定義
│   ├── npcs/       # NPC会話データ
│   └── scripts/    # イベントスクリプト
├── systems/        # ゲームロジック (TypeScript)
│   ├── battle/     # バトルエンジン、ダメージ計算、AI
│   ├── crafting/   # 発明システム
│   ├── shop/       # ショップ機能
│   ├── minigame/   # ミニゲーム（バイクチェイス）
│   └── core/       # ゲームステート、イベント管理
├── types/          # 型定義
└── utils/          # ユーティリティ（ロガー等）
tests/              # 検証用スクリプト
assets/             # アセットリスト
```

## セットアップ (Setup)

### 前提条件 (Prerequisites)
*   Node.js (v14以上推奨)
*   npm

### インストール (Installation)
```bash
npm install
```

### ビルド (Build)
TypeScriptをコンパイルします。
```bash
npm run build
```

### 実行 (Run Game)
プロトタイプのデモをプレイするには、以下のコマンドを実行してください。
```bash
npm start
```

### テスト実行 (Run Tests)
実装されたロジックの検証スクリプトを実行します。
```bash
npm test
```
個別のテストを実行する場合:
```bash
npx ts-node tests/verifyBattleLoop.ts
```

## 開発者 (Developer)
*   **Role**: 90年代RPGを愛するベテランゲーム開発者兼シナリオライター
*   **Tools**: TypeScript, Node.js

## ライセンス (License)
本プロジェクトは [Apache License 2.0](LICENSE) の下で公開されています。

---
*「歯車は回り続ける。いつか、あの空に届くまで。」*
